<div class="">
    <div class="row flex-row align-items-center ml-1 my-2">
        <button class="mr-2 btn btn-sm btn-outline-primary" (click)="goBack()">Back</button>
        <button class="mr-2 btn btn-sm btn-outline-primary" (click)="refresh()">Refresh</button>
        <h2><i class="fas fa-eye"></i> Watchlist</h2>
    </div>
    <app-message (okClickEvent)="messageClick()" [inputNoticeMessage]="refreshMsg" [inputErrorMessage]="errorMsg"></app-message>
    <div class="row">
        <div class="col-12 col-sm-12">
            <p class="lead">Add an equity to your watchlist</p>
            <!-- <h5>Add an equity to your watchlist</h5> -->
        </div>
    </div>

    <form [formGroup]="watchItemForm" (ngSubmit)="onSubmitWatchItem()">
        <div class="form-row">
            <div class="col-sm-6 col-6 col-lg-2 col-md-4">
                <label for="sym">Symbol:</label>
                <input id="sym" type="text" aria-describedby="adb" placeholder="Ticker Symbol" [ngClass]="{ 'is-invalid': watchItemSymbolControl!.invalid && (watchItemSymbolControl!.dirty || watchItemSymbolControl!.touched)}" class="form-control" formControlName="watchItemSymbolControl">
                <div *ngIf="watchItemForm.invalid && (watchItemForm.dirty || watchItemForm.touched)" class="invalid-feedback">
                    <div *ngIf="watchItemSymbolControl?.errors?.required">Symbol is required.</div>
                    <div *ngIf="watchItemSymbolControl?.errors?.maxlength">Symbol must be less than 8 characters long. </div>
                </div>
            </div>
            <div class="col-sm-6 col-6 col-lg-2 col-md-4">
                <label for="out">Outlook: </label>
                <select id="out" aria-describedby="adb" (change)="Select($event)" [ngClass]="{ 'is-invalid': watchItemOutlookControl!.invalid && (watchItemOutlookControl!.dirty || watchItemOutlookControl!.touched) }" class="select form-control" formControlName="watchItemOutlookControl">
                    <option *ngFor="let choice of dropDownOptions" [ngValue]="choice">{{choice}}</option>
                </select> 
                <div *ngIf="watchItemForm.invalid && (watchItemForm.dirty || watchItemForm.touched)" class="invalid-feedback">
                    <div *ngIf="watchItemOutlookControl?.errors?.required">Outlook is required.</div>
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="col-12 col-sm-12 col-md-8 col-lg-4">
                <button class="mt-2 btn btn-primary btn-block" type="submit" [disabled]="!watchItemForm.valid">Add</button>
            </div>
        </div>
    </form>

    <!-- <h4 class="mt-2">Watchlist</h4> -->
    <br />
    <div [ngClass]="'row'">
        <div class="col-12 col-sm-6 col-lg-2 col-md-4" *ngFor="let watchItem of watchList">
            <div class="card mx-1 mb-2" [ngClass]="isPredictionCorrect(watchItem) ? 'border-success' : 'border-danger'">
                <h5 class="card-header">
                    {{watchItem.symbol}}
                    <i [ngStyle]="{'color': isPredictionCorrect(watchItem) ? '#28a745' : '#dc3545'}"
                       [ngClass]="isPredictionCorrect(watchItem) ? 'ml-1 fas fa-check-circle' : 'fas fa-times-circle'">
                    </i>
                </h5>
                <div class="card-body text-center">
                    <h5 [ngClass]="'card-title text-dark'">{{watchItem.percentChange! | fiFormat : '' : '%' : true}}</h5>
                    <h6>{{watchItem.priceChange! | fiFormat : '$' : '' :true}}</h6>
                    <!-- sector.performance < 0 ? 'text-danger' : 'text-success'" class="card-title text-dark"> -->
                    <!-- <p class="card-text text-dark">Some quick example text to build on the card title and make up the bulk of the card's content.</p> -->
                </div>
            </div>
        </div>
    </div>
</div>

            <!--Symbol validation messages-->
            <!-- <div class="row"> -->
                <!-- <div class="col-md-12 col-lg-12 col-sm-12" *ngIf="watchItemSymbolControl!.invalid && (watchItemSymbolControl!.dirty || watchItemSymbolControl!.touched)" class="alert alert-danger">
                    <div *ngIf="watchItemSymbolControl?.errors?.required">
                        Symbol is required.
                    </div>
                    <div *ngIf="watchItemSymbolControl?.errors?.maxlength">
                        Symbol must be less than 8 characters long.
                    </div>
                </div> -->
                <!--Outlook validation messages-->
                <!-- <div *ngIf="watchItemOutlookControl?.invalid && (watchItemOutlookControl?.dirty || watchItemOutlookControl?.touched)" class="alert alert-danger">
                    <div *ngIf="watchItemOutlookControl?.errors?.required">
                        Outlook is required.
                    </div>
                </div> -->
            <!-- </div> -->
